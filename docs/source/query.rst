Queries
=============

A query is given as follows ::
	
	SELECT <selection> from <table> where <meta-column> = '{<query-parts}'

A query has 3 parts. Query, filter and sort ::
	
	{
		query:	{<query-options},
		filter:	{<query-options>},
		sort:	{<sort-options>}
	}

A query and filter have the same options i.e <query-options>. A query takes part in score calculation. The scores are output in the meta column in the result set. A filter simply filters the rows passing the conditions. 
By default the rows of the resultset are ordered by the score relevance. If you want the result sorted differently, the sorting order may be specified in the '<sort-options>'
	

Query and filter options
^^^^^^^^^^^^^^^^^^^^^^^^

A query or filter is as follows::
	
	{
		type:	<type>,
		<property> : <property-value>		
	}


The table below lists the queries that are possible and along with the properties that are available for each type of query. Also given in the table is the description for each query and the data types that are support a particular query.

Types of queries
^^^^^^^^^^^^^^^^

+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| Query type   | Description                                                 | Properties                                                                                              | Data types supported                                             |
+==============+=============================================================+=========================================================================================================+==================================================================+
| lucene       | A query using the lucene standard query parser syntax       | field: The default value on which this lucene query is being made                                       | All                                                              |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The lucene query using query parser syntax.                                                      |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| match        | A query to match a value exactly                            | field: The field name for the value has to match                                                        | All                                                              |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The value of the field to match.                                                                 |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| phrase       | Various values forming a phrase with a slop.                | field: The field name for the value has to match                                                        | text                                                             |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | values: The list of values of the phrase                                                                |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | slop: How many words can be skipped between thewords in the phrase                                      |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| fuzzy        | Fuzzy searches based on the Levenshtein Distance.           | field: The field name for the value has to match                                                        | text, string                                                     |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The value of the field to match.                                                                 | \* Also need to specify indexOptions during creation             |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | maxEdits: (default = 2):Value between 0 and 2 (the Levenshtein automaton maximum supported distance).   | \* Index options need to have DOCS\_AND\_FREQS\_AND\_POSITIONS   |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | prefixLength (default = 0): integer representing the length of common non-fuzzy prefix.                 |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | maxExpansions (default = 50): an integer for the maximum number of terms to match.                      |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| prefix       | A query to find values with the passed prefix               | field: The field name for the value has to be prefixed with                                             | text, string                                                     |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The value of the field to have the passed prefix.                                                |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| range        | A range of values to match                                  | field: The field name for which the range is being specified.                                           | All                                                              |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | lower: lower bound of the range. Defaults to lower value of the data type.                              |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | includeLower (default = false): if the left value is included in the results (>=)                       |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | upper: upper bound of the range. Defaults to upper value of the data type.                              |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | includeUpper (default = false): if the right value is included in the results (<=).                     |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| regex        | A query which can match the passed regex                    | field: The field name for which the value has to match the regex                                        | text, string                                                     |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The regex value                                                                                  |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| wildcard     | A query with wild card expressions                          | field: The field name for which the value has to match the wildcard                                     | text, string                                                     |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | value: The value with wildcards                                                                         |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
| boolean      | A query which joins sub queries using a boolean condition   | must: a list of conditions that must occur in the value. Each condition is a query.                     |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | should: a list of conditions that should occur. Each condition is a query.                              |                                                                  |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+
|              |                                                             | not: a list of conditions that should not occur. Each condition is a query                              | All                                                              |
+--------------+-------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+------------------------------------------------------------------+


Sort
^^^^^

A sort is specified as follows ::

	{
       fields: [
       	{field:<name>,reverse:<reverse>},
       	{field:<name>,reverse:<reverse>}...
       ]
    }

where <name> is the name of the field on which the sort is to be applied and reverse is specified optionally as true to reflect the sort order on a field.
